package com.vk2.touchsreentab.fragment;import android.arch.lifecycle.Observer;import android.arch.lifecycle.ViewModelProviders;import android.arch.paging.PagedList;import android.os.Build;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.support.annotation.RequiresApi;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.LinearLayout;import android.widget.ProgressBar;import com.vk2.touchsreentab.R;import com.vk2.touchsreentab.adapter.MultiViewRecommendAdapter;import com.vk2.touchsreentab.database.entity.Song;import com.vk2.touchsreentab.model.viewmodel.SongViewModel;import com.vk2.touchsreentab.utils.Constants;import java.util.Objects;public class RecommendFragment extends BaseFragment {    private View view;    private RecyclerView recyclerViewSongs;    private ProgressBar progressBar;    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        view = inflater.inflate(R.layout.fragment_recommend, container, false);        initView();        return view;    }    private void initView() {        recyclerViewSongs = view.findViewById(R.id.rcvSongs);        progressBar = view.findViewById(R.id.progressBar);        final MultiViewRecommendAdapter multiViewRecommendAdapter = new MultiViewRecommendAdapter();        LinearLayoutManager layoutManager = new LinearLayoutManager(getActivity(), LinearLayout.VERTICAL, false);        recyclerViewSongs.setLayoutManager(layoutManager);        recyclerViewSongs.addItemDecoration(getDivider(layoutManager));        recyclerViewSongs.setAdapter(multiViewRecommendAdapter);        SongViewModel songViewModel = ViewModelProviders.of(this).get(SongViewModel.class);        songViewModel.getAllListSong();        songViewModel.listSongOnline.observe(this, new Observer<PagedList<Song>>() {            @Override            public void onChanged(@Nullable PagedList<Song> songs) {                multiViewRecommendAdapter.submitList(songs);                Log.e("Tag","onChanged "+songs.size());            }        });        songViewModel.getProgressLoadStatus().observe(this, new Observer<String>() {            @RequiresApi(api = Build.VERSION_CODES.KITKAT)            @Override            public void onChanged(@Nullable String status) {                if (Objects.requireNonNull(status).equalsIgnoreCase(Constants.LOADING)) {                    progressBar.setVisibility(View.VISIBLE);                    Log.e("Tag","progressBar View.VISIBLE ");                } else if (status.equalsIgnoreCase(Constants.LOADED)) {                    progressBar.setVisibility(View.GONE);                    Log.e("Tag","progressBar View.GONE ");                }            }        });    }}