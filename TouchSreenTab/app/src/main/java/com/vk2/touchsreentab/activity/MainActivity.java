package com.vk2.touchsreentab.activity;import android.app.Fragment;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.view.Display;import android.view.View;import android.widget.FrameLayout;import com.commonsware.cwac.preso.PresentationFragment;import com.commonsware.cwac.preso.PresentationHelper;import com.vk2.touchsreentab.R;import com.vk2.touchsreentab.fragment.ControlFragment;import com.vk2.touchsreentab.fragment.FragmentDisplayPresentation;import com.vk2.touchsreentab.fragment.PageFragment;import com.vk2.touchsreentab.fragment.PlayerFragment;public class MainActivity extends AppCompatActivity implements PresentationHelper.Listener {    private PageFragment pageFragment;    private PlayerFragment playerFragment;    private ControlFragment controlFragment;    private FrameLayout framePage, frameControl;    PresentationHelper helper=null;    PresentationFragment preso=null;    View inline=null;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        framePage = findViewById(R.id.framePage);        frameControl = findViewById(R.id.frameControl);        helper=new PresentationHelper(this, this);        inline=findViewById(R.id.preso);        addFragment();    }    private void addFragment() {        if (pageFragment == null) pageFragment = new PageFragment();        if (playerFragment == null) playerFragment = new PlayerFragment();        if (controlFragment == null) controlFragment = new ControlFragment();        getSupportFragmentManager().beginTransaction()                .add(R.id.framePage, pageFragment, PageFragment.class.getName())                .add(R.id.framePlayer, playerFragment, PlayerFragment.class.getName())                .add(R.id.frameControl, controlFragment, ControlFragment.class.getName())                .commit();    }    public void playerFullScreen() {        framePage.setVisibility(View.GONE);        frameControl.setVisibility(View.GONE);    }    public void playerSmallScreen() {        framePage.setVisibility(View.VISIBLE);        frameControl.setVisibility(View.VISIBLE);    }    @Override    public void onResume() {        super.onResume();        helper.onResume();    }    @Override    public void onPause() {        helper.onPause();        super.onPause();    }    @Override    public void showPreso(Display display) {        if (inline.getVisibility() == View.VISIBLE) {            inline.setVisibility(View.GONE);            Fragment f=getFragmentManager().findFragmentById(R.id.preso);            getFragmentManager().beginTransaction().remove(f).commit();        }        preso=buildPreso(display);        preso.show(getFragmentManager(), "preso");    }    @Override    public void clearPreso(boolean switchToInline) {        if (switchToInline) {            inline.setVisibility(View.VISIBLE);            getFragmentManager().beginTransaction()                    .add(R.id.preso, buildPreso(null)).commit();        }        if (preso != null) {            preso.dismiss();            preso=null;        }    }    private PresentationFragment buildPreso(Display display) {        return(FragmentDisplayPresentation.newInstance(this, display));    }}